document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("back-to-top");e&&(window.addEventListener("scroll",(()=>{window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")})),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})));const t=document.getElementById("scroll-down"),o=document.getElementById("content-section");t&&o&&t.addEventListener("click",(()=>{o.scrollIntoView({behavior:"smooth"})}));const n=document.getElementById("products-section");t&&n&&!o&&t.addEventListener("click",(()=>{n.scrollIntoView({behavior:"smooth"})}));const s=document.querySelectorAll(".intro-carousel-item"),l=document.querySelectorAll(".intro-carousel-dot");if(s.length>0&&l.length>0){let e,t=function(e){s.forEach((e=>{e.classList.remove("opacity-100"),e.classList.add("opacity-0")})),l.forEach((e=>{e.classList.remove("bg-white"),e.classList.add("bg-gray-400")})),s[e]&&(s[e].classList.remove("opacity-0"),s[e].classList.add("opacity-100")),l[e]&&(l[e].classList.remove("bg-gray-400"),l[e].classList.add("bg-white")),n=e},o=function(){let e=(n+1)%s.length;t(e)},n=0;l.forEach(((e,o)=>{e.addEventListener("click",(()=>{t(o)}))})),e=setInterval(o,5e3);const c=document.querySelector(".intro-carousel-container");c&&(c.addEventListener("mouseenter",(()=>{clearInterval(e)})),c.addEventListener("mouseleave",(()=>{e=setInterval(o,5e3)})))}(()=>{const e=document.querySelector(".color-gallery-container");document.querySelector(".color-gallery-arrow");const t=document.getElementById("color-slider");if(!t||!e)return;t.innerHTML="",[{index:0,color:"bg-gray-200"},{index:1,color:"bg-gray-300"},{index:2,color:"bg-gray-400"},{index:3,color:"bg-gray-500"},{index:4,color:"bg-gray-600"},{index:5,color:"bg-gray-700"},{index:6,color:"bg-gray-800"},{index:7,color:"bg-blue-500"},{index:8,color:"bg-blue-600"},{index:9,color:"bg-blue-700"}].forEach((e=>{const o=document.createElement("div");o.className=`color-item ${e.color} cursor-pointer`,o.setAttribute("data-index",e.index);const n=document.createElement("span");n.className="text-white font-bold flex items-center justify-center h-full",n.textContent=e.index+1,o.appendChild(n),t.appendChild(o)}));const o=document.querySelectorAll(".color-item");let n,s=0;const l=()=>{n=setInterval((()=>{d((s+1)%o.length,!0)}),5e3)},c=()=>{clearInterval(n)};function a(t){const n=o.length,s=e.offsetWidth/2;e.offsetHeight;const l=.6*e.offsetWidth;o.forEach((e=>{e.style.position="absolute",e.style.width="40px",e.style.height="100%",e.style.opacity=.8,e.style.transition="all 0.5s ease",e.style.transform="translateX(0) scale(0.8)",e.style.zIndex="1",e.classList.remove("active-item")}));const c=o[t];c&&(c.style.width=`${l}px`,c.style.left=s-l/2+"px",c.style.opacity="1",c.style.zIndex="10",c.style.transform="scale(1)",c.classList.add("active-item"));const a=t;for(let e=0;e<a;e++){const n=o[e],c=t-e,a=10*c,d=5-c,r=Math.max(.3,.8-.1*c);n.style.left=s-l/2-40-a+"px",n.style.zIndex=d,n.style.opacity=r,n.style.transform=`translateX(${a}px) scale(${.8-.05*c})`}const d=n-t-1;for(let e=1;e<=d;e++){const n=o[t+e],c=10*e,a=5-e,d=Math.max(.3,.8-.1*e);n.style.left=`${s+l/2+c}px`,n.style.zIndex=a,n.style.opacity=d,n.style.transform=`translateX(-${c}px) scale(${.8-.05*e})`}!function(t,o){let n=document.querySelector(".left-stack-counter"),s=document.querySelector(".right-stack-counter");n||(n=document.createElement("div"),n.className="left-stack-counter absolute top-0 left-0 bg-gray-800 text-white px-2 py-1 rounded-bl z-20",e.appendChild(n)),s||(s=document.createElement("div"),s.className="right-stack-counter absolute top-0 right-0 bg-gray-800 text-white px-2 py-1 rounded-br z-20",e.appendChild(s)),n.textContent=t>0?`← ${t}`:"",s.textContent=o>0?`${o} →`:""}(a,d)}function d(e,t=!0){s=e,a(e),t&&window.goToCarouselSlide&&window.goToCarouselSlide(e)}document.addEventListener("keydown",(e=>{if("ArrowLeft"===e.key){d((s-1+o.length)%o.length,!0)}else if("ArrowRight"===e.key){d((s+1)%o.length,!0)}})),o.forEach((e=>{e.addEventListener("click",(()=>{d(parseInt(e.getAttribute("data-index")),!0)}))})),function(){let t=document.querySelector(".stack-prev-btn"),n=document.querySelector(".stack-next-btn");t||(t=document.createElement("button"),t.className="stack-prev-btn absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-2 z-20",t.innerHTML="←",e.appendChild(t)),n||(n=document.createElement("button"),n.className="stack-next-btn absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-2 z-20",n.innerHTML="→",e.appendChild(n)),t.addEventListener("click",(()=>{d((s-1+o.length)%o.length,!0)})),n.addEventListener("click",(()=>{d((s+1)%o.length,!0)}))}(),d(0,!0),l(),e.addEventListener("mouseenter",(()=>{c()})),e.addEventListener("mouseleave",(()=>{l()}));let r=0;e.addEventListener("touchstart",(e=>{r=e.touches[0].clientX,c()})),e.addEventListener("touchend",(e=>{const t=e.changedTouches[0].clientX-r;if(t>50){d((s-1+o.length)%o.length,!0)}else if(t<-50){d((s+1)%o.length,!0)}l()})),window.updateActiveColor=d})(),(()=>{const e=document.querySelector(".coverflow-container");if(document.getElementById("coverflow-prev"),document.getElementById("coverflow-next"),document.querySelectorAll(".carousel-dot"),!e)return;const t=e=>{};window.goToCarouselSlide=t})();const c=document.getElementById("contact-form"),a=document.getElementById("submit-btn"),d=document.getElementById("submit-text"),r=document.getElementById("submit-loading"),i=document.getElementById("success-message"),m=document.getElementById("error-message");c&&c.addEventListener("submit",(async e=>{e.preventDefault(),a.disabled=!0,d.classList.add("hidden"),r.classList.remove("hidden"),i.classList.add("hidden"),m.classList.add("hidden");try{const e=new FormData(c),t=await(await fetch("https://api.web3forms.com/submit",{method:"POST",body:e})).json();if(!t.success)throw new Error(t.message||"發送失敗");i.classList.remove("hidden"),i.classList.add("show"),c.reset(),setTimeout((()=>{i.classList.add("hidden"),i.classList.remove("show")}),5e3)}catch(e){m.classList.remove("hidden"),m.classList.add("show"),setTimeout((()=>{m.classList.add("hidden"),m.classList.remove("show")}),5e3)}finally{a.disabled=!1,d.classList.remove("hidden"),r.classList.add("hidden")}}))}));