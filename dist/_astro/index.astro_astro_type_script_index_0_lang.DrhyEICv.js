document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("scroll-down"),t=document.getElementById("content-section");e&&t&&e.addEventListener("click",(()=>{t.scrollIntoView({behavior:"smooth"})}));const n=document.getElementById("products-section");e&&n&&!t&&e.addEventListener("click",(()=>{n.scrollIntoView({behavior:"smooth"})}));const o=document.querySelectorAll(".intro-carousel-item"),s=document.querySelectorAll(".intro-carousel-dot");if(o.length>0&&s.length>0){let e,t=function(e){o.forEach((e=>{e.classList.remove("opacity-100"),e.classList.add("opacity-0")})),s.forEach((e=>{e.classList.remove("bg-white"),e.classList.add("bg-gray-400")})),o[e]&&(o[e].classList.remove("opacity-0"),o[e].classList.add("opacity-100")),s[e]&&(s[e].classList.remove("bg-gray-400"),s[e].classList.add("bg-white")),l=e},n=function(){let e=(l+1)%o.length;t(e)},l=0;s.forEach(((e,n)=>{e.addEventListener("click",(()=>{t(n)}))})),e=setInterval(n,5e3);const c=document.querySelector(".intro-carousel-container");c&&(c.addEventListener("mouseenter",(()=>{clearInterval(e)})),c.addEventListener("mouseleave",(()=>{e=setInterval(n,5e3)})))}(()=>{const e=document.querySelector(".color-gallery-container");document.querySelector(".color-gallery-arrow");const t=document.getElementById("color-slider");if(!t||!e)return;t.innerHTML="",[{index:0,color:"bg-gray-200"},{index:1,color:"bg-gray-300"},{index:2,color:"bg-gray-400"},{index:3,color:"bg-gray-500"},{index:4,color:"bg-gray-600"},{index:5,color:"bg-gray-700"},{index:6,color:"bg-gray-800"},{index:7,color:"bg-blue-500"},{index:8,color:"bg-blue-600"},{index:9,color:"bg-blue-700"}].forEach((e=>{const n=document.createElement("div");n.className=`color-item ${e.color} cursor-pointer`,n.setAttribute("data-index",e.index);const o=document.createElement("span");o.className="text-white font-bold flex items-center justify-center h-full",o.textContent=e.index+1,n.appendChild(o),t.appendChild(n)}));const n=document.querySelectorAll(".color-item");let o,s=0;const l=()=>{o=setInterval((()=>{r((s+1)%n.length,!0)}),5e3)},c=()=>{clearInterval(o)};function a(t){const o=n.length,s=e.offsetWidth/2;e.offsetHeight;const l=.6*e.offsetWidth;n.forEach((e=>{e.style.position="absolute",e.style.width="40px",e.style.height="100%",e.style.opacity=.8,e.style.transition="all 0.5s ease",e.style.transform="translateX(0) scale(0.8)",e.style.zIndex="1",e.classList.remove("active-item")}));const c=n[t];c&&(c.style.width=`${l}px`,c.style.left=s-l/2+"px",c.style.opacity="1",c.style.zIndex="10",c.style.transform="scale(1)",c.classList.add("active-item"));const a=t;for(let e=0;e<a;e++){const o=n[e],c=t-e,a=10*c,r=5-c,d=Math.max(.3,.8-.1*c);o.style.left=s-l/2-40-a+"px",o.style.zIndex=r,o.style.opacity=d,o.style.transform=`translateX(${a}px) scale(${.8-.05*c})`}const r=o-t-1;for(let e=1;e<=r;e++){const o=n[t+e],c=10*e,a=5-e,r=Math.max(.3,.8-.1*e);o.style.left=`${s+l/2+c}px`,o.style.zIndex=a,o.style.opacity=r,o.style.transform=`translateX(-${c}px) scale(${.8-.05*e})`}!function(t,n){let o=document.querySelector(".left-stack-counter"),s=document.querySelector(".right-stack-counter");o||(o=document.createElement("div"),o.className="left-stack-counter absolute top-0 left-0 bg-gray-800 text-white px-2 py-1 rounded-bl z-20",e.appendChild(o)),s||(s=document.createElement("div"),s.className="right-stack-counter absolute top-0 right-0 bg-gray-800 text-white px-2 py-1 rounded-br z-20",e.appendChild(s)),o.textContent=t>0?`← ${t}`:"",s.textContent=n>0?`${n} →`:""}(a,r)}function r(e,t=!0){s=e,a(e),t&&window.goToCarouselSlide&&window.goToCarouselSlide(e)}document.addEventListener("keydown",(e=>{if("ArrowLeft"===e.key){r((s-1+n.length)%n.length,!0)}else if("ArrowRight"===e.key){r((s+1)%n.length,!0)}})),n.forEach((e=>{e.addEventListener("click",(()=>{r(parseInt(e.getAttribute("data-index")),!0)}))})),function(){let t=document.querySelector(".stack-prev-btn"),o=document.querySelector(".stack-next-btn");t||(t=document.createElement("button"),t.className="stack-prev-btn absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-2 z-20",t.innerHTML="←",e.appendChild(t)),o||(o=document.createElement("button"),o.className="stack-next-btn absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white rounded-full p-2 z-20",o.innerHTML="→",e.appendChild(o)),t.addEventListener("click",(()=>{r((s-1+n.length)%n.length,!0)})),o.addEventListener("click",(()=>{r((s+1)%n.length,!0)}))}(),r(0,!0),l(),e.addEventListener("mouseenter",(()=>{c()})),e.addEventListener("mouseleave",(()=>{l()}));let d=0;e.addEventListener("touchstart",(e=>{d=e.touches[0].clientX,c()})),e.addEventListener("touchend",(e=>{const t=e.changedTouches[0].clientX-d;if(t>50){r((s-1+n.length)%n.length,!0)}else if(t<-50){r((s+1)%n.length,!0)}l()})),window.updateActiveColor=r})(),(()=>{const e=document.querySelector(".coverflow-container");if(document.getElementById("coverflow-prev"),document.getElementById("coverflow-next"),document.querySelectorAll(".carousel-dot"),!e)return;const t=e=>{};window.goToCarouselSlide=t})();const l=document.getElementById("contact-form"),c=document.getElementById("submit-btn"),a=document.getElementById("submit-text"),r=document.getElementById("submit-loading"),d=document.getElementById("success-message"),i=document.getElementById("error-message");l&&l.addEventListener("submit",(async e=>{e.preventDefault(),c.disabled=!0,a.classList.add("hidden"),r.classList.remove("hidden"),d.classList.add("hidden"),i.classList.add("hidden");try{const e=new FormData(l),t=await(await fetch("https://api.web3forms.com/submit",{method:"POST",body:e})).json();if(!t.success)throw new Error(t.message||"發送失敗");d.classList.remove("hidden"),d.classList.add("show"),l.reset(),setTimeout((()=>{d.classList.add("hidden"),d.classList.remove("show")}),5e3)}catch(e){i.classList.remove("hidden"),i.classList.add("show"),setTimeout((()=>{i.classList.add("hidden"),i.classList.remove("show")}),5e3)}finally{c.disabled=!1,a.classList.remove("hidden"),r.classList.add("hidden")}}))}));